<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ site.title }}{% if title %} // {{ title | stripSlashes | striptags | trim }}{% endif %}</title>
  <meta name="description" content="{{ description or site.description }}">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">

  {# --- SEO & Social Meta Tags --- #}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ title or site.title }}">
  <meta property="og:description" content="{{ description or site.description }}">
  <meta property="og:url" content="{{ page.url | url or site.url }}">
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:image" content="{{ site.url }}/assets/favicon.ico">
  <meta name="theme-color" content="{{ site.embedColor }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ title or site.title }}">
  <meta name="twitter:description" content="{{ description or site.description }}">
  <meta name="twitter:image" content="{{ site.url }}/assets/favicon.ico">
  <meta name="twitter:site" content="@angeldev0">
  <meta name="twitter:creator" content="@angeldev0">
  <meta name="color-scheme" content="light dark">
  <meta name="msapplication-TileColor" content="{{ site.embedColor }}">
  <meta name="theme-color" content="{{ site.embedColor }}">

  <script>
    /* Early theme paint */
    (function () {
      try {
        let t = localStorage.getItem('theme');
        if (!t) t = matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        document.documentElement.dataset.theme = t;
      } catch(e){}
    })();
  </script>
  <style>
    /* ---------- CSS Variables ---------- */
    :root {
      --bg: #fffed7ff;
      --text: #222;
      --border: #383838ff;
      --footer-bg: #fdffe8ff;
      --footer-text: #555;
      --footer-link-bg: #f5d693ff;
      --header-bg: #fff9c5ff;
      --header-text: #303132ff;
      --header-link-bg: #f5d693ff;
      --link: #222;
      --link-hover: #242424ff;
      --list-border: #f0f0f0;
      --decoration-color: #212121ff;
      --selection: #423a29ff;
      --ease: 0.25s;
      --max-width: 600px;
    }
    [data-theme="dark"] {
      --bg: #101112ff;
      --text: #e7e7e7ff;
      --border: #687075;
      --footer-bg: #0c0c0cff;
      --footer-text: #9fa3a5ff;
      --footer-link-bg: #393d3eff;
      --header-bg: #0c0c0cff;
      --header-text: #dadadaff;
      --header-link-bg: #646a6bff;
      --link: #eaeaea;
      --link-hover: #a5ff5b;
      --list-border: #23272a;
      --decoration-color: #c8c8c8ff;
      --selection: #f1dbabff;
    }

    /* ---------- Base ---------- */
    * { box-sizing:border-box; }
    html,body { height:100%; margin:0; padding:0; font-family:Sen,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,sans-serif; background:var(--bg); color:var(--text); }
    input,textarea { height:100%; margin:0; padding:0; font-family:monospace; color:var(--text); }
    body { min-height:100vh; display:flex; flex-direction:column; }
    a { color:var(--link); text-decoration:var(--decoration-color) solid underline; transition:color var(--ease); }
    a:hover { color:var(--link-hover); }
    h1 { font-size:2rem; margin:1.5rem 0 1rem; font-weight:600; }
    h2,h3 { margin:1.5rem 0 1rem; font-weight:500; }
    p { margin:1rem 0; }
    ul { list-style:none; padding:0; margin:0; }
    li { margin:.75rem 0; padding:.5rem 0; border-bottom:1px solid var(--list-border); }
    li:last-child { border-bottom:none; }

    /* ---------- Layout Containers ---------- */
    .container { max-width:var(--max-width); width:100%; margin:0 auto; padding:1.5rem 1rem; }
    main.container { flex:1 0 auto; }
    header,footer { background:none; color:var(--text); text-align:center; border-bottom:1px solid var(--border); transition:background var(--ease),color var(--ease),border-color var(--ease); }
    header h1 a { text-decoration:none; }

    /* ---------- Header Navigation ---------- */
    nav ul { display:flex; gap:1.5rem; justify-content:center; padding:0; }
    nav ul li { border:none; margin:0; padding:0; }
    .header-bar { display:flex; align-items:center; justify-content:space-between; height:50px; padding:0 1rem; }
    .header-bar h1 { margin:0; }
    .actions { display:flex; gap:.5rem; align-items:center; }
    #menu-toggle,#theme-toggle {
      display:inline-flex; background:none; border:1px solid var(--header-text);
      border-radius:20%; cursor:pointer; font-size:1.05em; transition:background var(--ease),color var(--ease),border-color var(--ease);
      width: 2.2em; height:2.2em; align-items:center; justify-content:center;
    }
    #menu-toggle { display:none; color: var(--header-text); }

    /* ---------- Dark/Light Theme Toggle --------- */
    #theme-toggle { position: relative; background: none; border: 1.5px solid var(--header-text); cursor: pointer; overflow: hidden; padding: 0; display: flex; align-items: center; justify-content: center; }
    .theme-toggle-svg { stroke: var(--text); stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; width: 1.8em; height: 1.8em; display: block; transition: stroke 0.3s; }
    .theme-toggle-svg .icon-sun,
    .theme-toggle-svg .icon-moon { transform-origin: 50% 50%; transition: opacity 0.4s cubic-bezier(.4,0,.2,1), transform 0.5s cubic-bezier(.4,0,.2,1); }
    .theme-toggle-svg .icon-sun { opacity: 1; transform: scale(1) rotate(0deg); }
    .theme-toggle-svg .icon-moon { opacity: 0; transform: scale(0.7) rotate(-30deg); }
    [data-theme="dark"] .theme-toggle-svg .icon-sun { opacity: 0; transform: scale(0.7) rotate(30deg); }
    [data-theme="dark"] .theme-toggle-svg .icon-moon { opacity: 1; transform: scale(1) rotate(0deg); }

    /* ---------- Mobile Fullscreen Menu ---------- */
    #menu-overlay {
      position:fixed; inset:0; display:none; background:var(--bg); z-index:1000; padding:0 12%;
    }
    #menu-overlay.open { display:flex; flex-direction:column; justify-content:center; align-items:flex-start; }
    #menu-overlay ul { max-width:480px; width:100%; }
    #menu-overlay li { display:flex; gap:.75rem; margin:.45rem 0; padding:0; border:none; }
    #menu-overlay li::before { content:"//"; opacity:.6; font-size:1.9rem; line-height:1.25; }
    #menu-overlay a { font-size:1.9rem; line-height:1.25; color:var(--text); text-decoration:none; }

    /* ---------- Footer ---------- */
    footer { border-top:1px solid var(--border); border-bottom:none; margin-top:2rem; padding:1.5rem 0 1rem; font-size:.95em; background:var(--footer-bg); color:var(--footer-text); letter-spacing:.01em; }
    footer a { color:var(--footer-text); text-decoration:none; padding:0 .2em; border-radius:2px; transition:background var(--ease),color var(--ease); }
    footer a:hover { background:var(--footer-link-bg); color:var(--link-hover); }

    .footer-layout { display:grid; grid-template-columns:1fr auto; grid-template-rows:auto auto; align-items:start; gap:0 3rem; min-height:130px; }
    .footer-brand { font-weight:600; font-size:1.05rem; grid-column:1; grid-row:1; text-align:left; }
    .footer-brand a { text-decoration:none; color:var(--link); }
    .footer-groups { grid-column:2; grid-row:1 / span 2; display:grid; grid-auto-flow:column; gap:2.5rem; text-align:left; }
    .footer-groups li { margin:0 0 .4rem; border:none; padding:0; }
    .footer-groups a { display:inline-block; padding:.15rem .35rem; border-radius:4px; }
    .footer-groups a:hover { background:var(--footer-link-bg); color:var(--link-hover); }
    .footer-copy { grid-column:1; grid-row:2; align-self:end; font-size:.75rem; opacity:.65; text-align:left; margin-top:1rem; }

    /* ----------- Header ----------- */
    header { background: var(--header-bg); color: var(--header-text); border-bottom: 1px solid var(--border); }
    header a { color: var(--header-text); text-decoration: none; padding: 0 .2em; border-radius: 2px; transition: background var(--ease), color var(--ease); }
    header a:hover { background: var(--header-link-bg); color: var(--link-hover); }
    .site-header .header-bar { background: transparent; }
    .site-header h1 a { color: var(--header-text); }

    /* ---------- Utilities ---------- */
    .excerpt { margin:.25rem 0 0; font-size:.8em; color:var(--footer-text); line-height:1.3; }
    .indent { padding-left:1rem; }
    .list-pad ul { padding-left:1rem; }
    ::selection { background: var(--selection); color: var(--bg); }

    /* ---------- Responsive ---------- */
    @media (max-width:700px) {
      nav.desktop-nav { display:none; }
      #menu-toggle { display:inline-block; }
    }
    @media (max-width:640px) {
      .footer-layout { grid-template-columns:1fr; grid-template-rows:auto auto auto; gap:1rem 0; min-height:0; }
      .footer-groups { grid-column:1; grid-row:2; grid-auto-flow:row; gap:1.25rem; }
      .footer-copy { grid-row:3; margin-top:.25rem; }
    }
    @media (max-width:600px) {
      .container { padding:1rem .5rem; }
      nav ul { gap:1rem; }
      .indent { padding-left:.75rem; }
    }
    @media (max-width:400px) {
      nav ul { flex-direction:column; gap:.5rem; }
      header .container, footer .container { padding-left:.2rem; padding-right:.2rem; }
      .indent { padding-left:.5rem; }
    }
  </style>
</head>
<body>
  {% include "components/header.njk" %}
  <main class="container">
    {% block content %}{{ content | safe }}{% endblock %}
  </main>
  {% include "components/footer.njk" %}

  <script>
    window.addEventListener('DOMContentLoaded', function() {
      var link = document.createElement('link');
      link.rel = 'stylesheet'; link.href = 'https://fonts.googleapis.com/css2?family=Sen:wght@400&display=swap';
      document.head.appendChild(link);
    });

    (function(){
      const root=document.documentElement;
      const themeBtn=document.getElementById("theme-toggle");
      if(themeBtn){
        const apply=t=>{root.dataset.theme=t;localStorage.setItem("theme",t)};
        themeBtn.onclick=()=>apply(root.dataset.theme==="dark"?"light":"dark");
      }
      const menuBtn=document.getElementById("menu-toggle");
      const overlay=document.getElementById("menu-overlay");
      function toggle(){
        const open=overlay.classList.toggle("open");
        menuBtn.setAttribute("aria-expanded",open);
        overlay.setAttribute("aria-hidden",!open);
        document.body.style.overflow=open?"hidden":"";
      }
      if(menuBtn&&overlay){
        menuBtn.addEventListener("click",toggle);
        overlay.addEventListener("click",e=>{ if(e.target===overlay) toggle(); });
        addEventListener("keydown",e=>{ if(e.key==="Escape"&&overlay.classList.contains("open")) toggle(); });
      }
    })();
  </script>
</body></html>
